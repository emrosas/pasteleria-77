---
import { type ImageMetadata } from "astro";
import { Image } from "astro:assets";

interface Props {
  name: string;
  description: string;
  imagePath: string;
  type: "cake" | "Bread";
  anytime?: boolean;
}

const { name, description, imagePath, type, anytime } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/products/*.{jpeg,jpg,png,gif,webp}"
);
if (!images[imagePath]) {
  throw new Error(`Image not found: ${imagePath}`);
}
---

<li>
  <Image src={images[imagePath]()} alt={name} />
  <h4>{name}</h4>
  <p>{description}</p>
  {type === "cake" && anytime && <p>Anytime</p>}
</li>
